---
sidebar_position: 1
---

# Linux / MacOS

To install Stalwart on Linux or MacOS, execute the following command in your terminal:

```bash
$ curl --proto '=https' --tlsv1.2 -sSf https://get.stalw.art/install.sh -o install.sh
```

Then, execute the installation script as root. The default installation directory is `/opt/stalwart`. If you want to install Stalwart in a different directory, you can specify the installation directory as an argument:

```bash
$ sudo sh install.sh /path/to/install
```

If you are planning to use FoundationDB as the backend, add the `--fdb` parameter to the installation script to download the version compiled with FoundationDB support.

### Log in to the web interface

Once the installation is complete, the installation script will print out the administrator account and password: 

```bash
$ sudo sh install.sh
âœ… Configuration file written to /opt/stalwart/etc/config.toml
ðŸ”‘ Your administrator account is 'admin' with password 'w95Yuiu36E'.
ðŸŽ‰ Installation complete! Continue the setup at http://yourserver.org:8080/login
```

With this information, you can log in to the web interface at `http://yourserver.org:8080/login`.

### Choose where to store your data

Once you have logged in, go to the `Settings` > `Storage` section and configure your [data](/docs/storage/data), [blob](/docs/storage/blob), [full-text](/docs/storage/fts) and [in-memory](/docs/storage/in-memory) stores. Read the [choosing a database](/docs/install/store) section for more details on the available options. 

If you would like an external authentication directory such as [LDAP](/docs/auth/backend/ldap.md) or [SQL](/docs/auth/backend/sql), go to the `Settings` > `Authentication` section and configure your [authentication backend](/docs/install/directory).

:::tip Optional

Stalwart comes pre-configured with `RocksDB` as the default backend for all stores. You can skip this step if you are happy with the default configuration.

:::

### Configure your hostname and domain

Next, make sure that the server hostname in `Settings` > `Server` > `Network` is correct. Then, add your main domain name in `Management` > `Directory` > `Domains`. After creating the domain, the interface will display the DNS records that you need to add to your domain's DNS settings.

For example:

```txt
MX  example.org.                      10 mail.example.org.
TXT 202404e._domainkey.example.org.   v=DKIM1; k=ed25519; h=sha256; p=MCowBQYDK2VwAyEAOT2JN9F8SLTVFNEODDu22SD9RJDC282mugCAeXkzjH0=
TXT 202404r._domainkey.example.org.   v=DKIM1; k=rsa; h=sha256; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAykeYJjv5N0AlnJ8gKF+/8qjbStiMFWvPg+p3JPh96GPXEN6l9W/Ee6Lag6i3vLyTVH5dnRVRBhfWhc+Dc0nKreZe4f5i4L5M4RI31+RpEgu4bCmncUIk2WzJgGBW5XbiOwXjge6OKWtJQN9d8Lc1AuryL5xeged9iS6xd/+EJz4WxAf18U+j38xmAm8fJUTBnQVeb/AZup+voSKAS59jyumsb0jQtXfX5xnwTFXdiX2OF8LRrmmNs/ObHozgHftxAv+YCiSU4bqSlKNPQIrN5kk1YnZDnLlc1Gr66AWlmdUVE7PWtZPTy4f8+uHO93EW3WUxLmynZm+Syn9FTJC2uwIDAQAB
TXT mail.example.org.                 v=spf1 a -all ra=postmaster
TXT example.org.                      v=spf1 mx -all ra=postmaster
TXT _dmarc.example.org.               v=DMARC1; p=reject; rua=mailto:postmaster@example.org; ruf=mailto:postmaster@example.org
```

:::tip 

Some of the autogenerated records may be optional depending on your setup, read the [setting up DNS](/docs/install/dns) section for more information.

:::

### Enable TLS

Stalwart requires a valid TLS certificate to secure the connection between the server and the client. You can enable TLS in one of the following ways:

- If you already have a TLS certificate for your server, you can upload it in the `Settings` > `Server` > `TLS` > `Certificates` section. 
- If you don't have a certificate, you can enable automatic TLS certificates from Let's Encrypt using [ACME](/docs/server/tls/acme/overview). To enable ACME, go to the `Settings` > `Server` > `TLS` > `ACME Providers` section and add Let's Encrypt as your ACME provider making sure that your server hostname is listed as one of the Subject Names. Stalwart supports the `tls-alpn-01`, `dns-01` and `http-01` challenges, if you are unsure which one to use, read the [ACME challenge types](/docs/server/tls/acme/challenges) documentation.
- If you are running Stalwart behind a [reverse proxy](/docs/server/reverse-proxy/overview) such as Traefik, Caddy, HAProxy or NGINX, you should skip this step and configure TLS in your reverse proxy instead.

### Restart service

Once you have completed the setup instructions, restart Stalwart:

```bash
$ sudo systemctl restart stalwart-mail
```

Or, if you are using MacOS:

```bash
$ sudo launchctl kickstart -k stalwart.mail
```

### Next steps

If you have selected to use the internal directory, you can now add your users in the `Management` > `Directory` > `Accounts` section. If you have selected an external directory, you will need to create users in your directory server.

If everything went well, your users should now be able to connect to the server and send and receive emails. If you are unable to connect to the server, check the log files from the web-admin or under `<INSTALL_DIR>/logs` for any errors.

If you encounter any issues, please refer to the [troubleshooting](/docs/management/troubleshoot) section for help. If you have questions please check the [FAQ](/docs/faq) section or start a discussion in the [community forum](https://github.com/stalwartlabs/stalwart/discussions).

:::tip 

Before making your server publicly accessible, please make sure to read the [securing your server](/docs/install/security) section.

:::

### Setup demonstration

![Setup screencast](/img/screencast-setup.gif)
